@using DG_BugTracker.ViewModels
@using DG_BugTracker.Helpers
@model IEnumerable<UserProfileViewModel>

@{ 
    var roleHelper = new UserRoleHelper();
}

@{
    ViewBag.Title = "ManageMultipleRoles";
}

<h2>ManageMultipleRoles</h2>

@using (Html.BeginForm())
{ 

    @Html.AntiForgeryToken()
<div class="row">
    <div class="col-md-4">
        @Html.ListBox("Users", null, new { @class = "form-control" })
    </div>
    <div class="col-md-4">
        @Html.DropDownList("RoleName", null, "--Select Role--", new { @class = "form-control" })
    </div>
    <div class="col-md-4">
        <button type="submit" class="btn btn-wd btn-lg btn-primary">Submit Changes</button>
    </div>
</div>
}


<div class="table-responsive">
    <table class="table">
        <thead>
        <th>
            <i class="material-icons">perm_identity</i>
        </th>
        
        <th>
            Email Address
        </th>
        <th>
            First Name
        </th>
        <th>
            Last Name
        </th>
        <th>
            Role
        </th>
        </thead>
        <tbody>
            @foreach (var user in Model)
            {
                <tr>
                    <td>
                        <img src="@user.AvatarPath" style="width: 30px; height: 30px; border-radius: 40px;" />
                    </td>
                    
                    <td class="text-white">
                        @user.Email
                    </td>
                    <td class="text-white">
                        @user.FirstName
                    </td>
                    <td class="text-white">
                        @user.LastName
                    </td>
                    <td class="text-white">
                        @roleHelper.ListUserRoles(user.Id).FirstOrDefault()
                    </td>
                    
                </tr>
            }
        </tbody>
    </table>
</div>